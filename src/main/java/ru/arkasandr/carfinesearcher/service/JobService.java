package ru.arkasandr.carfinesearcher.service;import lombok.RequiredArgsConstructor;import lombok.extern.slf4j.Slf4j;import org.springframework.scheduling.annotation.Scheduled;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import static org.apache.commons.collections4.CollectionUtils.isEmpty;@Slf4j@Service@RequiredArgsConstructorpublic class JobService {    private final RequestService requestService;    private final GibddScrapService scrapService;    @Scheduled(cron = "${gibdd.shedule}", zone = "Europe/Moscow")    @Transactional    public void archiveRequests() {        log.debug("Deleting dead requests job");        var requests = requestService.findDeadRequestsIds();        if (!isEmpty(requests)) {            requestService.archiveDeadRequests();            requests.forEach(request -> scrapService.closePage(request.getId()));        }    }}